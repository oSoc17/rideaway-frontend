!function e(t,o,r){function n(a,s){if(!o[a]){if(!t[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(i)return i(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var u=o[a]={exports:{}};t[a][0].call(u.exports,function(e){var o=t[a][1][e];return n(o||e)},u,u.exports,e,t,o,r)}return o[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)n(r[a]);return n}({1:[function(e,t,o){"use strict";function r(e){return document.getElementsByClassName(e)[0]}function n(e){r("center-btn").addEventListener("click",function(){console.log(e.getSource("currentPosition"))})}Object.defineProperty(o,"__esModule",{value:!0}),o.registerEvents=n},{}],2:[function(e,t,o){"use strict";function r(){var e=document.createElement("div");e.className="marker";var t=document.createElement("div");t.className="dot";var o=document.createElement("div");return o.className="pulse",e.appendChild(t),e.appendChild(o),new mapboxgl.Marker(e)}function n(e){var t=r();navigator.geolocation?navigator.geolocation.watchPosition(function(o){return i(o,t,e)}):alert("Sorry, your browser doesn't support geolocation!"),window.DeviceOrientationEvent&&window.addEventListener("deviceorientation",a)}function i(e,t,o){t.setLngLat([e.coords.longitude,e.coords.latitude]),t.addTo(o)}function a(e){}Object.defineProperty(o,"__esModule",{value:!0}),o.startTracking=n},{}],3:[function(e,t,o){"use strict";function r(){p.addSource("GFR",{type:"geojson",data:"http://188.226.154.37/routes/GFR.json"}),p.addLayer({id:"GFR_routes",type:"line",source:"GFR",layout:{visibility:"visible"},paint:{"line-color":{type:"identity",property:"colour"},"line-width":5,"line-opacity":.3}}),p.addLayer({id:"GFR_symbols",type:"symbol",source:"GFR",layout:{visibility:"visible","symbol-placement":"line","text-font":["Open Sans Regular"],"text-field":"{icr}","text-size":16},paint:{"text-color":{type:"identity",property:"colour"}}})}function n(e){var t=p.getLayoutProperty(e,"visibility");t="visible"===t?"none":"visible",p.setLayoutProperty(e,"visibility",t)}function i(e){var t={type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Point",coordinates:e},properties:{iconSize:[50,50]}}]},o=t.features[0],r=document.createElement("img");return r.className="marker",r.src="./icons/locator-yellow.svg",r.style.width=o.properties.iconSize[0]+"px",r.style.height=o.properties.iconSize[1]+"px",new mapboxgl.Marker(r,{offset:[-o.properties.iconSize[0]/2,-o.properties.iconSize[1]/2]}).setLngLat(o.geometry.coordinates)}function a(e,t,o){e=[e[1],e[0]],t=[t[1],t[0]];var r="http://188.226.154.37/route?loc1="+e+"&loc2="+t+"&profile="+o;p.addLayer({id:o,type:"line",source:{type:"geojson",data:r},paint:{"line-color":"networks"===o?"red":"grey","line-width":4}})}function s(){p.removeLayer("networks"),p.getSource("networks"),p.removeLayer("shortest")}function c(e){return new MapboxGeocoder({accessToken:"pk.eyJ1IjoiYXJuYXVkd2V5dHMiLCJhIjoiY2o0cGt3d3oxMXl0cDMzcXNlbThnM3RtaCJ9.BMUyxqHH-FC69pW4U4YO9A",flyTo:!1,placeholder:e,country:"BE"})}function l(e){p.setFilter("GFR_routes",["==","icr",e]),p.setFilter("GFR_symbols",["==","icr",e])}var u=e("./geolocation"),d=e("./events");mapboxgl.accessToken="";var p=new mapboxgl.Map({container:"map",style:"https://openmaptiles.github.io/positron-gl-style/style-cdn.json",center:[4.355975,50.860633],zoom:11});p.on("load",function(){function e(e){return e.geometry.coordinates}var t=null,o=null,y=null,v=null;(0,u.startTracking)(p),(0,d.registerEvents)(p),r();var f=c("origin"),m=c("destination");p.addControl(f),p.addControl(m),f.on("result",function(r){var n=r.result;t&&o===e(n)||(y&&y.remove(),t=e(n),y=i(t),y.addTo(p))}),m.on("result",function(r){var c=r.result;o&&o===e(c)||(o&&s(),v&&v.remove(),o=e(c),v=i(o),v.addTo(p),a(t,o,"shortest"),a(t,o,"networks"),n("GFR_routes"),n("GFR_symbols"))}),l("A")})},{"./events":1,"./geolocation":2}]},{},[3]);
//# sourceMappingURL=main.min.js.map
