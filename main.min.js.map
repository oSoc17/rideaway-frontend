{"version":3,"sources":["node_modules/browser-pack/_prelude.js","node_modules/whatwg-fetch/fetch.js","src/js/events.js","src/js/geolocation.js","src/js/lib.js","src/js/scripts.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","self","normalizeName","name","String","test","TypeError","toLowerCase","normalizeValue","value","iteratorFor","items","iterator","next","shift","done","undefined","support","iterable","Symbol","Headers","headers","this","map","forEach","append","Array","isArray","header","Object","getOwnPropertyNames","consumed","body","bodyUsed","Promise","reject","fileReaderReady","reader","resolve","onload","result","onerror","error","readBlobAsArrayBuffer","blob","FileReader","promise","readAsArrayBuffer","readBlobAsText","readAsText","readArrayBufferAsText","buf","view","Uint8Array","chars","fromCharCode","join","bufferClone","slice","byteLength","set","buffer","Body","_initBody","_bodyInit","_bodyText","Blob","prototype","isPrototypeOf","_bodyBlob","formData","FormData","_bodyFormData","searchParams","URLSearchParams","toString","arrayBuffer","isDataView","_bodyArrayBuffer","ArrayBuffer","isArrayBufferView","get","type","rejected","then","text","decode","json","JSON","parse","normalizeMethod","method","upcased","toUpperCase","methods","indexOf","Request","input","options","url","credentials","mode","referrer","form","trim","split","bytes","replace","decodeURIComponent","parseHeaders","rawHeaders","line","parts","key","Response","bodyInit","status","ok","statusText","fetch","viewClasses","obj","DataView","isView","oldValue","has","hasOwnProperty","callback","thisArg","keys","push","values","entries","clone","response","redirectStatuses","redirect","RangeError","location","init","request","xhr","XMLHttpRequest","getAllResponseHeaders","responseURL","responseText","ontimeout","open","withCredentials","responseType","setRequestHeader","send","polyfill","registerEvents","_lib","getElementByClassName","addEventListener","console","log","getSource","createMarker","el","document","createElement","className","child1","child2","appendChild","mapboxgl","Marker","startTracking","marker","navigator","geolocation","watchPosition","position","onPosition","alert","window","DeviceOrientationEvent","_setHeading","setLngLat","coords","longitude","latitude","addTo","getElementsByClassName","uniq","prims","boolean","number","string","objs","filter","item","_typeof","showAllRoutes","addAllRoutes","catch","ex","geojson","addFilters","features","addSource","data","addLayer","id","source","layout","visibility","paint","line-color","property","line-width","line-opacity","symbol-placement","text-font","text-field","text-size","text-color","toggleLayer","getLayoutProperty","setLayoutProperty","addMarker","LatLng","geometry","coordinates","properties","iconSize","src","style","width","height","offset","calculateRoute","origin","destination","profile","clearRoutes","removeLayer","createGeocoder","placeholder","MapboxGeocoder","accessToken","flyTo","country","setPoint","filterRoute","route","setFilter","removeFilter","configureStyle","color","routeConfig","2","3","4","5","6","7","8","9","10","11","12","MM","SZ","CK","PP","A","B","C","innerHTML","backgroundColor","menu","routes","feat","icr","colour","all","querySelector","classList","remove","_geolocation","_events","Map","container","center","zoom","on","markerO","markerD","geocoder","geocoder2","addControl","_ref","_ref2"],"mappings":"CAAA,QAAAA,GAAAC,EAAAC,EAAAC,GAAA,QAAAC,GAAAC,EAAAC,GAAA,IAAAJ,EAAAG,GAAA,CAAA,IAAAJ,EAAAI,GAAA,CAAA,GAAAE,GAAA,kBAAAC,UAAAA,OAAA,KAAAF,GAAAC,EAAA,MAAAA,GAAAF,GAAA,EAAA,IAAAI,EAAA,MAAAA,GAAAJ,GAAA,EAAA,IAAAK,GAAA,GAAAC,OAAA,uBAAAN,EAAA,IAAA,MAAAK,GAAAE,KAAA,mBAAAF,EAAA,GAAAG,GAAAX,EAAAG,IAAAS,WAAAb,GAAAI,GAAA,GAAAU,KAAAF,EAAAC,QAAA,SAAAd,GAAA,GAAAE,GAAAD,EAAAI,GAAA,GAAAL,EAAA,OAAAI,GAAAF,GAAAF,IAAAa,EAAAA,EAAAC,QAAAd,EAAAC,EAAAC,EAAAC,GAAA,MAAAD,GAAAG,GAAAS,QAAA,IAAA,GAAAL,GAAA,kBAAAD,UAAAA,QAAAH,EAAA,EAAAA,EAAAF,EAAAa,OAAAX,IAAAD,EAAAD,EAAAE,GAAA,OAAAD,KAAAa,GAAA,SAAAT,EAAAU,EAAAJ,ICAA,SAAAK,GACA,YA2CA,SAAAC,GAAAC,GAIA,GAHA,gBAAAA,KACAA,EAAAC,OAAAD,IAEA,6BAAAE,KAAAF,GACA,KAAA,IAAAG,WAAA,yCAEA,OAAAH,GAAAI,cAGA,QAAAC,GAAAC,GAIA,MAHA,gBAAAA,KACAA,EAAAL,OAAAK,IAEAA,EAIA,QAAAC,GAAAC,GACA,GAAAC,IACAC,KAAA,WACA,GAAAJ,GAAAE,EAAAG,OACA,QAAAC,SAAAC,KAAAP,EAAAA,MAAAA,IAUA,OANAQ,GAAAC,WACAN,EAAAO,OAAAP,UAAA,WACA,MAAAA,KAIAA,EAGA,QAAAQ,GAAAC,GACAC,KAAAC,OAEAF,YAAAD,GACAC,EAAAG,QAAA,SAAAf,EAAAN,GACAmB,KAAAG,OAAAtB,EAAAM,IACAa,MACAI,MAAAC,QAAAN,GACAA,EAAAG,QAAA,SAAAI,GACAN,KAAAG,OAAAG,EAAA,GAAAA,EAAA,KACAN,MACAD,GACAQ,OAAAC,oBAAAT,GAAAG,QAAA,SAAArB,GACAmB,KAAAG,OAAAtB,EAAAkB,EAAAlB,KACAmB,MA0DA,QAAAS,GAAAC,GACA,GAAAA,EAAAC,SACA,MAAAC,SAAAC,OAAA,GAAA7B,WAAA,gBAEA0B,GAAAC,UAAA,EAGA,QAAAG,GAAAC,GACA,MAAA,IAAAH,SAAA,SAAAI,EAAAH,GACAE,EAAAE,OAAA,WACAD,EAAAD,EAAAG,SAEAH,EAAAI,QAAA,WACAN,EAAAE,EAAAK,UAKA,QAAAC,GAAAC,GACA,GAAAP,GAAA,GAAAQ,YACAC,EAAAV,EAAAC,EAEA,OADAA,GAAAU,kBAAAH,GACAE,EAGA,QAAAE,GAAAJ,GACA,GAAAP,GAAA,GAAAQ,YACAC,EAAAV,EAAAC,EAEA,OADAA,GAAAY,WAAAL,GACAE,EAGA,QAAAI,GAAAC,GAIA,IAAA,GAHAC,GAAA,GAAAC,YAAAF,GACAG,EAAA,GAAA5B,OAAA0B,EAAAtD,QAEAP,EAAA,EAAAA,EAAA6D,EAAAtD,OAAAP,IACA+D,EAAA/D,GAAAa,OAAAmD,aAAAH,EAAA7D,GAEA,OAAA+D,GAAAE,KAAA,IAGA,QAAAC,GAAAN,GACA,GAAAA,EAAAO,MACA,MAAAP,GAAAO,MAAA,EAEA,IAAAN,GAAA,GAAAC,YAAAF,EAAAQ,WAEA,OADAP,GAAAQ,IAAA,GAAAP,YAAAF,IACAC,EAAAS,OAIA,QAAAC,KA0FA,MAzFAxC,MAAAW,UAAA,EAEAX,KAAAyC,UAAA,SAAA/B,GAEA,GADAV,KAAA0C,UAAAhC,EACAA,EAEA,GAAA,gBAAAA,GACAV,KAAA2C,UAAAjC,MACA,IAAAf,EAAA2B,MAAAsB,KAAAC,UAAAC,cAAApC,GACAV,KAAA+C,UAAArC,MACA,IAAAf,EAAAqD,UAAAC,SAAAJ,UAAAC,cAAApC,GACAV,KAAAkD,cAAAxC,MACA,IAAAf,EAAAwD,cAAAC,gBAAAP,UAAAC,cAAApC,GACAV,KAAA2C,UAAAjC,EAAA2C,eACA,IAAA1D,EAAA2D,aAAA3D,EAAA2B,MAAAiC,EAAA7C,GACAV,KAAAwD,iBAAArB,EAAAzB,EAAA6B,QAEAvC,KAAA0C,UAAA,GAAAE,OAAA5C,KAAAwD,uBACA,CAAA,IAAA7D,EAAA2D,cAAAG,YAAAZ,UAAAC,cAAApC,KAAAgD,EAAAhD,GAGA,KAAA,IAAAvC,OAAA,4BAFA6B,MAAAwD,iBAAArB,EAAAzB,OAdAV,MAAA2C,UAAA,EAmBA3C,MAAAD,QAAA4D,IAAA,kBACA,gBAAAjD,GACAV,KAAAD,QAAAuC,IAAA,eAAA,4BACAtC,KAAA+C,WAAA/C,KAAA+C,UAAAa,KACA5D,KAAAD,QAAAuC,IAAA,eAAAtC,KAAA+C,UAAAa,MACAjE,EAAAwD,cAAAC,gBAAAP,UAAAC,cAAApC,IACAV,KAAAD,QAAAuC,IAAA,eAAA,qDAKA3C,EAAA2B,OACAtB,KAAAsB,KAAA,WACA,GAAAuC,GAAApD,EAAAT,KACA,IAAA6D,EACA,MAAAA,EAGA,IAAA7D,KAAA+C,UACA,MAAAnC,SAAAI,QAAAhB,KAAA+C,UACA,IAAA/C,KAAAwD,iBACA,MAAA5C,SAAAI,QAAA,GAAA4B,OAAA5C,KAAAwD,mBACA,IAAAxD,KAAAkD,cACA,KAAA,IAAA/E,OAAA,uCAEA,OAAAyC,SAAAI,QAAA,GAAA4B,OAAA5C,KAAA2C,cAIA3C,KAAAsD,YAAA,WACA,MAAAtD,MAAAwD,iBACA/C,EAAAT,OAAAY,QAAAI,QAAAhB,KAAAwD,kBAEAxD,KAAAsB,OAAAwC,KAAAzC,KAKArB,KAAA+D,KAAA,WACA,GAAAF,GAAApD,EAAAT,KACA,IAAA6D,EACA,MAAAA,EAGA,IAAA7D,KAAA+C,UACA,MAAArB,GAAA1B,KAAA+C,UACA,IAAA/C,KAAAwD,iBACA,MAAA5C,SAAAI,QAAAY,EAAA5B,KAAAwD,kBACA,IAAAxD,KAAAkD,cACA,KAAA,IAAA/E,OAAA,uCAEA,OAAAyC,SAAAI,QAAAhB,KAAA2C,YAIAhD,EAAAqD,WACAhD,KAAAgD,SAAA,WACA,MAAAhD,MAAA+D,OAAAD,KAAAE,KAIAhE,KAAAiE,KAAA,WACA,MAAAjE,MAAA+D,OAAAD,KAAAI,KAAAC,QAGAnE,KAMA,QAAAoE,GAAAC,GACA,GAAAC,GAAAD,EAAAE,aACA,OAAAC,GAAAC,QAAAH,IAAA,EAAAA,EAAAD,EAGA,QAAAK,GAAAC,EAAAC,GACAA,EAAAA,KACA,IAAAlE,GAAAkE,EAAAlE,IAEA,IAAAiE,YAAAD,GAAA,CACA,GAAAC,EAAAhE,SACA,KAAA,IAAA3B,WAAA,eAEAgB,MAAA6E,IAAAF,EAAAE,IACA7E,KAAA8E,YAAAH,EAAAG,YACAF,EAAA7E,UACAC,KAAAD,QAAA,GAAAD,GAAA6E,EAAA5E,UAEAC,KAAAqE,OAAAM,EAAAN,OACArE,KAAA+E,KAAAJ,EAAAI,KACArE,GAAA,MAAAiE,EAAAjC,YACAhC,EAAAiE,EAAAjC,UACAiC,EAAAhE,UAAA,OAGAX,MAAA6E,IAAA/F,OAAA6F,EAWA,IARA3E,KAAA8E,YAAAF,EAAAE,aAAA9E,KAAA8E,aAAA,QACAF,EAAA7E,SAAAC,KAAAD,UACAC,KAAAD,QAAA,GAAAD,GAAA8E,EAAA7E,UAEAC,KAAAqE,OAAAD,EAAAQ,EAAAP,QAAArE,KAAAqE,QAAA,OACArE,KAAA+E,KAAAH,EAAAG,MAAA/E,KAAA+E,MAAA,KACA/E,KAAAgF,SAAA,MAEA,QAAAhF,KAAAqE,QAAA,SAAArE,KAAAqE,SAAA3D,EACA,KAAA,IAAA1B,WAAA,4CAEAgB,MAAAyC,UAAA/B,GAOA,QAAAsD,GAAAtD,GACA,GAAAuE,GAAA,GAAAhC,SASA,OARAvC,GAAAwE,OAAAC,MAAA,KAAAjF,QAAA,SAAAkF,GACA,GAAAA,EAAA,CACA,GAAAD,GAAAC,EAAAD,MAAA,KACAtG,EAAAsG,EAAA3F,QAAA6F,QAAA,MAAA,KACAlG,EAAAgG,EAAAjD,KAAA,KAAAmD,QAAA,MAAA,IACAJ,GAAA9E,OAAAmF,mBAAAzG,GAAAyG,mBAAAnG,OAGA8F,EAGA,QAAAM,GAAAC,GACA,GAAAzF,GAAA,GAAAD,EASA,OARA0F,GAAAL,MAAA,SAAAjF,QAAA,SAAAuF,GACA,GAAAC,GAAAD,EAAAN,MAAA,KACAQ,EAAAD,EAAAlG,QAAA0F,MACA,IAAAS,EAAA,CACA,GAAAxG,GAAAuG,EAAAxD,KAAA,KAAAgD,MACAnF,GAAAI,OAAAwF,EAAAxG,MAGAY,EAKA,QAAA6F,GAAAC,EAAAjB,GACAA,IACAA,MAGA5E,KAAA4D,KAAA,UACA5D,KAAA8F,OAAA,UAAAlB,GAAAA,EAAAkB,OAAA,IACA9F,KAAA+F,GAAA/F,KAAA8F,QAAA,KAAA9F,KAAA8F,OAAA,IACA9F,KAAAgG,WAAA,cAAApB,GAAAA,EAAAoB,WAAA,KACAhG,KAAAD,QAAA,GAAAD,GAAA8E,EAAA7E,SACAC,KAAA6E,IAAAD,EAAAC,KAAA,GACA7E,KAAAyC,UAAAoD,GA7XA,IAAAlH,EAAAsH,MAAA,CAIA,GAAAtG,IACAwD,aAAA,mBAAAxE,GACAiB,SAAA,UAAAjB,IAAA,YAAAkB,QACAyB,KAAA,cAAA3C,IAAA,QAAAA,IAAA,WACA,IAEA,MADA,IAAAiE,OACA,EACA,MAAApF,GACA,OAAA,MAGAwF,SAAA,YAAArE,GACA2E,YAAA,eAAA3E,GAGA,IAAAgB,EAAA2D,YACA,GAAA4C,IACA,qBACA,sBACA,6BACA,sBACA,uBACA,sBACA,uBACA,wBACA,yBAGA3C,EAAA,SAAA4C,GACA,MAAAA,IAAAC,SAAAvD,UAAAC,cAAAqD,IAGAzC,EAAAD,YAAA4C,QAAA,SAAAF,GACA,MAAAA,IAAAD,EAAAzB,QAAAlE,OAAAsC,UAAAQ,SAAA9E,KAAA4H,KAAA,EAyDArG,GAAA+C,UAAA1C,OAAA,SAAAtB,EAAAM,GACAN,EAAAD,EAAAC,GACAM,EAAAD,EAAAC,EACA,IAAAmH,GAAAtG,KAAAC,IAAApB,EACAmB,MAAAC,IAAApB,GAAAyH,EAAAA,EAAA,IAAAnH,EAAAA,GAGAW,EAAA+C,UAAA,OAAA,SAAAhE,SACAmB,MAAAC,IAAArB,EAAAC,KAGAiB,EAAA+C,UAAAc,IAAA,SAAA9E,GAEA,MADAA,GAAAD,EAAAC,GACAmB,KAAAuG,IAAA1H,GAAAmB,KAAAC,IAAApB,GAAA,MAGAiB,EAAA+C,UAAA0D,IAAA,SAAA1H,GACA,MAAAmB,MAAAC,IAAAuG,eAAA5H,EAAAC,KAGAiB,EAAA+C,UAAAP,IAAA,SAAAzD,EAAAM,GACAa,KAAAC,IAAArB,EAAAC,IAAAK,EAAAC,IAGAW,EAAA+C,UAAA3C,QAAA,SAAAuG,EAAAC,GACA,IAAA,GAAA7H,KAAAmB,MAAAC,IACAD,KAAAC,IAAAuG,eAAA3H,IACA4H,EAAAlI,KAAAmI,EAAA1G,KAAAC,IAAApB,GAAAA,EAAAmB,OAKAF,EAAA+C,UAAA8D,KAAA,WACA,GAAAtH,KAEA,OADAW,MAAAE,QAAA,SAAAf,EAAAN,GAAAQ,EAAAuH,KAAA/H,KACAO,EAAAC,IAGAS,EAAA+C,UAAAgE,OAAA,WACA,GAAAxH,KAEA,OADAW,MAAAE,QAAA,SAAAf,GAAAE,EAAAuH,KAAAzH,KACAC,EAAAC,IAGAS,EAAA+C,UAAAiE,QAAA,WACA,GAAAzH,KAEA,OADAW,MAAAE,QAAA,SAAAf,EAAAN,GAAAQ,EAAAuH,MAAA/H,EAAAM,MACAC,EAAAC,IAGAM,EAAAC,WACAE,EAAA+C,UAAAhD,OAAAP,UAAAQ,EAAA+C,UAAAiE,QAqJA,IAAAtC,IAAA,SAAA,MAAA,OAAA,UAAA,OAAA,MA4CAE,GAAA7B,UAAAkE,MAAA,WACA,MAAA,IAAArC,GAAA1E,MAAAU,KAAAV,KAAA0C,aA6BAF,EAAAjE,KAAAmG,EAAA7B,WAgBAL,EAAAjE,KAAAqH,EAAA/C,WAEA+C,EAAA/C,UAAAkE,MAAA,WACA,MAAA,IAAAnB,GAAA5F,KAAA0C,WACAoD,OAAA9F,KAAA8F,OACAE,WAAAhG,KAAAgG,WACAjG,QAAA,GAAAD,GAAAE,KAAAD,SACA8E,IAAA7E,KAAA6E,OAIAe,EAAAxE,MAAA,WACA,GAAA4F,GAAA,GAAApB,GAAA,MAAAE,OAAA,EAAAE,WAAA,IAEA,OADAgB,GAAApD,KAAA,QACAoD,EAGA,IAAAC,IAAA,IAAA,IAAA,IAAA,IAAA,IAEArB,GAAAsB,SAAA,SAAArC,EAAAiB,GACA,IAAA,IAAAmB,EAAAxC,QAAAqB,GACA,KAAA,IAAAqB,YAAA,sBAGA,OAAA,IAAAvB,GAAA,MAAAE,OAAAA,EAAA/F,SAAAqH,SAAAvC,MAGAlG,EAAAmB,QAAAA,EACAnB,EAAA+F,QAAAA,EACA/F,EAAAiH,SAAAA,EAEAjH,EAAAsH,MAAA,SAAAtB,EAAA0C,GACA,MAAA,IAAAzG,SAAA,SAAAI,EAAAH,GACA,GAAAyG,GAAA,GAAA5C,GAAAC,EAAA0C,GACAE,EAAA,GAAAC,eAEAD,GAAAtG,OAAA,WACA,GAAA2D,IACAkB,OAAAyB,EAAAzB,OACAE,WAAAuB,EAAAvB,WACAjG,QAAAwF,EAAAgC,EAAAE,yBAAA,IAEA7C,GAAAC,IAAA,eAAA0C,GAAAA,EAAAG,YAAA9C,EAAA7E,QAAA4D,IAAA,gBACA,IAAAjD,GAAA,YAAA6G,GAAAA,EAAAP,SAAAO,EAAAI,YACA3G,GAAA,GAAA4E,GAAAlF,EAAAkE,KAGA2C,EAAApG,QAAA,WACAN,EAAA,GAAA7B,WAAA,4BAGAuI,EAAAK,UAAA,WACA/G,EAAA,GAAA7B,WAAA,4BAGAuI,EAAAM,KAAAP,EAAAjD,OAAAiD,EAAAzC,KAAA,GAEA,YAAAyC,EAAAxC,cACAyC,EAAAO,iBAAA,GAGA,gBAAAP,IAAA5H,EAAA2B,OACAiG,EAAAQ,aAAA,QAGAT,EAAAvH,QAAAG,QAAA,SAAAf,EAAAN,GACA0I,EAAAS,iBAAAnJ,EAAAM,KAGAoI,EAAAU,SAAA,KAAAX,EAAA5E,UAAA,KAAA4E,EAAA5E,cAGA/D,EAAAsH,MAAAiC,UAAA,IACA,mBAAAvJ,MAAAA,KAAAqB,0CC1cO,SAASmI,GAAelI,IAC7B,EAAAmI,EAAAC,uBAAsB,cAAcC,iBAAiB,QAAS,WAC5DC,QAAQC,IAAIvI,EAAIwI,UAAU,yEAFdN,eAAAA,CAFhB,IAAAC,GAAApK,EAAA,sDCAA,SAAS0K,KACP,GAaIC,GAAKC,SAASC,cAAc,MAChCF,GAAGG,UAAY,QACf,IAAIC,GAASH,SAASC,cAAc,MACpCE,GAAOD,UAAY,KACnB,IAAIE,GAASJ,SAASC,cAAc,MAKpC,OAJAG,GAAOF,UAAY,QACnBH,EAAGM,YAAYF,GACfJ,EAAGM,YAAYD,GAER,GAAIE,UAASC,OAAOR,GAGtB,QAASS,GAAcnJ,GAC5B,GAAMoJ,GAASX,GACXY,WAAUC,YACZD,UAAUC,YAAYC,cAAc,SAAAC,GAAA,MAClCC,GAAWD,EAAUJ,EAAQpJ,KAG/B0J,MAAM,oDAGJC,OAAOC,wBACTD,OAAOtB,iBAAiB,oBAAqBwB,GASjD,QAASJ,GAAWD,EAAUJ,EAAQpJ,GACpCoJ,EAAOU,WAAWN,EAASO,OAAOC,UAAWR,EAASO,OAAOE,WAC7Db,EAAOc,MAAMlK,GAGf,QAAS6J,GAAYtM,uDAzBL4L,cAAAA,sCC1BT,SAASf,GAAsBS,GAEpC,MADiBF,UAASwB,uBAAuBtB,GACjC,GAGX,QAASuB,GAAKtM,GACnB,GAAIuM,IAAUC,WAAaC,UAAYC,WACrCC,IAEF,OAAO3M,GAAE4M,OAAO,SAASC,GACvB,GAAIhH,OAAA,KAAcgH,EAAd,YAAAC,EAAcD,EAClB,OAAIhH,KAAQ0G,IACHA,EAAM1G,GAAM4C,eAAeoE,KAE7BN,EAAM1G,GAAMgH,IAAQ,KACfF,EAAKjG,QAAQmG,IAAS,IAAYF,EAAK9D,KAAKgE,wQAf5CvC,sBAAAA,IAKAgC,KAAAA,sCCShB,SAASS,KAEP7E,MAAM,mDACHnC,KAAK,SAAAkD,GAAA,MAAYA,GAAS/C,SAC1BH,KAAK,SAAAG,GACJ8G,EAAa9G,KAEd+G,MAAM,SAAAC,GAAA,MAAM1C,SAAQC,IAAIyC,KAG7B,QAASF,GAAaG,GACpBC,EAAWD,EAAQE,UAEnBnL,EAAIoL,UAAU,OACZzH,KAAM,UACN0H,KAAMJ,IAERjL,EAAIsL,UACFC,GAAI,aACJ5H,KAAM,OACN6H,OAAQ,MACRC,QACEC,WAAY,WAEdC,OACEC,cACEjI,KAAM,WACNkI,SAAU,UAEZC,aAAc,EACdC,eAAgB,MAGpB/L,EAAIsL,UACFC,GAAI,cACJ5H,KAAM,SACN6H,OAAQ,MACRC,QACEC,WAAY,UACZM,mBAAoB,OACpBC,aAAc,qBACdC,aAAc,QACdC,YAAa,IAEfR,OACES,cACEzI,KAAM,WACNkI,SAAU,aAMlB,QAASQ,GAAYd,GACnB,GAAIG,GAAa1L,EAAIsM,kBAAkBf,EAAI,aAEzCG,GADiB,YAAfA,EACW,OAEA,UAEf1L,EAAIuM,kBAAkBhB,EAAI,aAAcG,GAG1C,QAASc,GAAUC,GACjB,GAAMxB,IACJtH,KAAM,oBACNwH,WAEIxH,KAAM,UACN+I,UACE/I,KAAM,QACNgJ,YAAaF,GAEfG,YACEC,UAAW,GAAI,QAKjBzD,EAAS6B,EAAQE,SAAS,GAC5BzC,EAAKC,SAASC,cAAc,MAKhC,OAJAF,GAAGG,UAAY,SACfH,EAAGoE,IAAM,6BACTpE,EAAGqE,MAAMC,MAAQ5D,EAAOwD,WAAWC,SAAS,GAAK,KACjDnE,EAAGqE,MAAME,OAAS7D,EAAOwD,WAAWC,SAAS,GAAK,KAC3C,GAAI5D,UAASC,OAAOR,GACzBwE,SACG9D,EAAOwD,WAAWC,SAAS,GAAK,GAChCzD,EAAOwD,WAAWC,SAAS,GAAK,KAElC/C,UAAUV,EAAOsD,SAASC,aAG/B,QAASQ,GAAeC,EAAQC,EAAaC,GAE3CF,GAAUA,EAAO,GAAIA,EAAO,IAC5BC,GAAeA,EAAY,GAAIA,EAAY,GAC3C,IAAMzI,GAAA,8CAAoDwI,EAApD,SAAmEC,EAAnE,YAA0FC,CAChGtN,GAAIsL,UACFC,GAAI+B,EACJ3J,KAAM,OACN6H,QACE7H,KAAM,UACN0H,KAAMzG,GAER+G,OACEC,aAA0B,aAAZ0B,EAAyB,MAAQ,OAC/CxB,aAAc,KAKpB,QAASyB,KACPvN,EAAIwN,YAAY,YAChBxN,EAAIwI,UAAU,YACdxI,EAAIwN,YAAY,YAGlB,QAASC,GAAeC,GACtB,MAAO,IAAIC,iBACTC,YACE,iGACFC,OAAO,EACPH,YAAAA,EACAI,QAAS,OAIb,QAASC,GAAS9M,GAChB,MAAOA,GAAOyL,SAASC,YAGzB,QAASqB,GAAYC,GACnBjO,EAAIkO,UAAU,cAAe,KAAM,MAAOD,IAC1CjO,EAAIkO,UAAU,eAAgB,KAAM,MAAOD,IAG7C,QAASE,KACPnO,EAAIkO,UAAU,aAAc,MAC5BlO,EAAIkO,UAAU,cAAe,MAG/B,QAASE,GAAe1F,EAAI2F,GAC1B,GAAMC,IACJ9P,EAAK,SACL+P,EAAK,SACLC,EAAK,SACLC,EAAK,SACLC,EAAK,SACLC,EAAK,SACLC,EAAK,SACLC,EAAK,SACLC,EAAK,SACLC,GAAM,SACNC,GAAM,SACNC,GAAM,SACNC,GAAI,aACJC,GAAI,aACJC,GAAI,aACJC,GAAI,aACJC,EAAG,OACHC,EAAG,OACHC,EAAG,OAIL,OAFA9G,GAAGG,WAAa,IAAMyF,EAAY5F,EAAG+G,WACrC/G,EAAGqE,MAAM2C,gBAAkBrB,EACpB3F,EAGT,QAASwC,GAAWC,GAClB,GAAIwE,IAAO,EAAAxH,EAAAC,uBAAsB,aAC7BwH,MACJzE,GAASlL,QAAQ,SAAA4P,GACfD,EAAOjJ,MACL/H,KAAMiR,EAAKjD,WAAWkD,IACtBzB,MAAOwB,EAAKjD,WAAWmD,UAG3B,IAAIC,GAAMrH,SAASC,cAAc,KACjCoH,GAAInH,UAAY,wCAChBmH,EAAIP,UAAY,MAChBO,EAAI3H,iBAAiB,QAAS,WACbM,SAASsH,cAAc,2BAC/BC,UAAUC,OAAO,0BACxBH,EAAInH,WAAa,0BACjBsF,MAEFwB,EAAK3G,YAAYgH,IACjB,EAAA7H,EAAAiC,MAAKwF,GAAQ3P,QAAQ,SAAAgO,GACnB3F,QAAQC,IAAI0F,EACZ,IAAIvF,GAAKC,SAASC,cAAc,KAChCF,GAAGG,UAAY,iBACfH,EAAG+G,UAAYxB,EAAMrP,KACrB8J,EAAK0F,EAAe1F,EAAIuF,EAAMI,OAC9B3F,EAAGL,iBAAiB,QAAS,WACZM,SAASsH,cAAc,2BAC/BC,UAAUC,OAAO,0BACxBzH,EAAGG,WAAa,0BAChBmF,EAAYC,EAAMrP,QAEpB+Q,EAAK3G,YAAYN,KAtNrB3K,EAAA,eAEA,IAAAoK,GAAApK,EAAA,SACAqS,EAAArS,EAAA,iBACAsS,EAAAtS,EAAA,WAEAkL,UAAS2E,YAAc,EACvB,IAAM5N,GAAM,GAAIiJ,UAASqH,KACvBC,UAAW,MACXxD,MAAO,kEACPyD,QAAS,SAAU,WACnBC,KAAM,IA+MRzQ,GAAI0Q,GAAG,OAAQ,WACb,GAAItD,GAAS,KACTC,EAAc,KACdsD,EAAU,KACVC,EAAU,MAGd,EAAAR,EAAAjH,eAAcnJ,IAEd,EAAAqQ,EAAAnI,gBAAelI,GAEN6K,GAGT,IAAMgG,GAAWpD,EAAe,UAC1BqD,EAAYrD,EAAe,cACjCzN,GAAI+Q,WAAWF,GACf7Q,EAAI+Q,WAAWD,GAGfD,EAASH,GAAG,SAAU,SAAAM,GAAgB,GAAb/P,GAAa+P,EAAb/P,MAGlBmM,IAAUC,IAAgBU,EAAS9M,KACtC0P,GAAWA,EAAQR,SACnB/C,EAASW,EAAS9M,GAClB0P,EAAUnE,EAAUY,GACpBuD,EAAQzG,MAAMlK,MAGlB8Q,EAAUJ,GAAG,SAAU,SAAAO,GAAgB,GAAbhQ,GAAagQ,EAAbhQ,MACnBoM,IAAeA,IAAgBU,EAAS9M,KAC3CoM,GAAeE,IACfqD,GAAWA,EAAQT,SACnB9C,EAAcU,EAAS9M,GACvB2P,EAAUpE,EAAUa,GACpBuD,EAAQ1G,MAAMlK,GACdmN,EAAeC,EAAQC,EAAa,YACpCF,EAAeC,EAAQC,EAAa,YACpChB,EAAY,cACZA,EAAY","file":"main.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","(function(self) {\n  'use strict';\n\n  if (self.fetch) {\n    return\n  }\n\n  var support = {\n    searchParams: 'URLSearchParams' in self,\n    iterable: 'Symbol' in self && 'iterator' in Symbol,\n    blob: 'FileReader' in self && 'Blob' in self && (function() {\n      try {\n        new Blob()\n        return true\n      } catch(e) {\n        return false\n      }\n    })(),\n    formData: 'FormData' in self,\n    arrayBuffer: 'ArrayBuffer' in self\n  }\n\n  if (support.arrayBuffer) {\n    var viewClasses = [\n      '[object Int8Array]',\n      '[object Uint8Array]',\n      '[object Uint8ClampedArray]',\n      '[object Int16Array]',\n      '[object Uint16Array]',\n      '[object Int32Array]',\n      '[object Uint32Array]',\n      '[object Float32Array]',\n      '[object Float64Array]'\n    ]\n\n    var isDataView = function(obj) {\n      return obj && DataView.prototype.isPrototypeOf(obj)\n    }\n\n    var isArrayBufferView = ArrayBuffer.isView || function(obj) {\n      return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n    }\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name)\n    }\n    if (/[^a-z0-9\\-#$%&'*+.\\^_`|~]/i.test(name)) {\n      throw new TypeError('Invalid character in header field name')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value)\n    }\n    return value\n  }\n\n  // Build a destructive iterator for the value list\n  function iteratorFor(items) {\n    var iterator = {\n      next: function() {\n        var value = items.shift()\n        return {done: value === undefined, value: value}\n      }\n    }\n\n    if (support.iterable) {\n      iterator[Symbol.iterator] = function() {\n        return iterator\n      }\n    }\n\n    return iterator\n  }\n\n  function Headers(headers) {\n    this.map = {}\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value)\n      }, this)\n    } else if (Array.isArray(headers)) {\n      headers.forEach(function(header) {\n        this.append(header[0], header[1])\n      }, this)\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name])\n      }, this)\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name)\n    value = normalizeValue(value)\n    var oldValue = this.map[name]\n    this.map[name] = oldValue ? oldValue+','+value : value\n  }\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)]\n  }\n\n  Headers.prototype.get = function(name) {\n    name = normalizeName(name)\n    return this.has(name) ? this.map[name] : null\n  }\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  }\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = normalizeValue(value)\n  }\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    for (var name in this.map) {\n      if (this.map.hasOwnProperty(name)) {\n        callback.call(thisArg, this.map[name], name, this)\n      }\n    }\n  }\n\n  Headers.prototype.keys = function() {\n    var items = []\n    this.forEach(function(value, name) { items.push(name) })\n    return iteratorFor(items)\n  }\n\n  Headers.prototype.values = function() {\n    var items = []\n    this.forEach(function(value) { items.push(value) })\n    return iteratorFor(items)\n  }\n\n  Headers.prototype.entries = function() {\n    var items = []\n    this.forEach(function(value, name) { items.push([name, value]) })\n    return iteratorFor(items)\n  }\n\n  if (support.iterable) {\n    Headers.prototype[Symbol.iterator] = Headers.prototype.entries\n  }\n\n  function consumed(body) {\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result)\n      }\n      reader.onerror = function() {\n        reject(reader.error)\n      }\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader()\n    var promise = fileReaderReady(reader)\n    reader.readAsArrayBuffer(blob)\n    return promise\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader()\n    var promise = fileReaderReady(reader)\n    reader.readAsText(blob)\n    return promise\n  }\n\n  function readArrayBufferAsText(buf) {\n    var view = new Uint8Array(buf)\n    var chars = new Array(view.length)\n\n    for (var i = 0; i < view.length; i++) {\n      chars[i] = String.fromCharCode(view[i])\n    }\n    return chars.join('')\n  }\n\n  function bufferClone(buf) {\n    if (buf.slice) {\n      return buf.slice(0)\n    } else {\n      var view = new Uint8Array(buf.byteLength)\n      view.set(new Uint8Array(buf))\n      return view.buffer\n    }\n  }\n\n  function Body() {\n    this.bodyUsed = false\n\n    this._initBody = function(body) {\n      this._bodyInit = body\n      if (!body) {\n        this._bodyText = ''\n      } else if (typeof body === 'string') {\n        this._bodyText = body\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this._bodyText = body.toString()\n      } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n        this._bodyArrayBuffer = bufferClone(body.buffer)\n        // IE 10-11 can't handle a DataView body.\n        this._bodyInit = new Blob([this._bodyArrayBuffer])\n      } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n        this._bodyArrayBuffer = bufferClone(body)\n      } else {\n        throw new Error('unsupported BodyInit type')\n      }\n\n      if (!this.headers.get('content-type')) {\n        if (typeof body === 'string') {\n          this.headers.set('content-type', 'text/plain;charset=UTF-8')\n        } else if (this._bodyBlob && this._bodyBlob.type) {\n          this.headers.set('content-type', this._bodyBlob.type)\n        } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n          this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8')\n        }\n      }\n    }\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this)\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyArrayBuffer) {\n          return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      }\n\n      this.arrayBuffer = function() {\n        if (this._bodyArrayBuffer) {\n          return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n        } else {\n          return this.blob().then(readBlobAsArrayBuffer)\n        }\n      }\n    }\n\n    this.text = function() {\n      var rejected = consumed(this)\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return readBlobAsText(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as text')\n      } else {\n        return Promise.resolve(this._bodyText)\n      }\n    }\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      }\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    }\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT']\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase()\n    return (methods.indexOf(upcased) > -1) ? upcased : method\n  }\n\n  function Request(input, options) {\n    options = options || {}\n    var body = options.body\n\n    if (input instanceof Request) {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read')\n      }\n      this.url = input.url\n      this.credentials = input.credentials\n      if (!options.headers) {\n        this.headers = new Headers(input.headers)\n      }\n      this.method = input.method\n      this.mode = input.mode\n      if (!body && input._bodyInit != null) {\n        body = input._bodyInit\n        input.bodyUsed = true\n      }\n    } else {\n      this.url = String(input)\n    }\n\n    this.credentials = options.credentials || this.credentials || 'omit'\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers)\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET')\n    this.mode = options.mode || this.mode || null\n    this.referrer = null\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(body)\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this, { body: this._bodyInit })\n  }\n\n  function decode(body) {\n    var form = new FormData()\n    body.trim().split('&').forEach(function(bytes) {\n      if (bytes) {\n        var split = bytes.split('=')\n        var name = split.shift().replace(/\\+/g, ' ')\n        var value = split.join('=').replace(/\\+/g, ' ')\n        form.append(decodeURIComponent(name), decodeURIComponent(value))\n      }\n    })\n    return form\n  }\n\n  function parseHeaders(rawHeaders) {\n    var headers = new Headers()\n    rawHeaders.split(/\\r?\\n/).forEach(function(line) {\n      var parts = line.split(':')\n      var key = parts.shift().trim()\n      if (key) {\n        var value = parts.join(':').trim()\n        headers.append(key, value)\n      }\n    })\n    return headers\n  }\n\n  Body.call(Request.prototype)\n\n  function Response(bodyInit, options) {\n    if (!options) {\n      options = {}\n    }\n\n    this.type = 'default'\n    this.status = 'status' in options ? options.status : 200\n    this.ok = this.status >= 200 && this.status < 300\n    this.statusText = 'statusText' in options ? options.statusText : 'OK'\n    this.headers = new Headers(options.headers)\n    this.url = options.url || ''\n    this._initBody(bodyInit)\n  }\n\n  Body.call(Response.prototype)\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    })\n  }\n\n  Response.error = function() {\n    var response = new Response(null, {status: 0, statusText: ''})\n    response.type = 'error'\n    return response\n  }\n\n  var redirectStatuses = [301, 302, 303, 307, 308]\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code')\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  }\n\n  self.Headers = Headers\n  self.Request = Request\n  self.Response = Response\n\n  self.fetch = function(input, init) {\n    return new Promise(function(resolve, reject) {\n      var request = new Request(input, init)\n      var xhr = new XMLHttpRequest()\n\n      xhr.onload = function() {\n        var options = {\n          status: xhr.status,\n          statusText: xhr.statusText,\n          headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n        }\n        options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL')\n        var body = 'response' in xhr ? xhr.response : xhr.responseText\n        resolve(new Response(body, options))\n      }\n\n      xhr.onerror = function() {\n        reject(new TypeError('Network request failed'))\n      }\n\n      xhr.ontimeout = function() {\n        reject(new TypeError('Network request failed'))\n      }\n\n      xhr.open(request.method, request.url, true)\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true\n      }\n\n      if ('responseType' in xhr && support.blob) {\n        xhr.responseType = 'blob'\n      }\n\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value)\n      })\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit)\n    })\n  }\n  self.fetch.polyfill = true\n})(typeof self !== 'undefined' ? self : this);\n","import { getElementByClassName } from './lib';\n\nexport function registerEvents(map) {\n  getElementByClassName('center-btn').addEventListener('click', () => {\n    console.log(map.getSource('currentPosition'));\n  });\n}\n","function createMarker() {\n  const geojson = {\n    type: 'FeatureCollection',\n    features: [\n      {\n        id: 'currentPosition',\n        type: 'Feature',\n        geometry: { type: 'Point', coordinates: [0, 0] },\n        properties: { iconSize: [50, 50] }\n      }\n    ]\n  };\n\n  // create our pulsating dot\n  let el = document.createElement('div');\n  el.className = 'marker';\n  let child1 = document.createElement('div');\n  child1.className = 'dot';\n  let child2 = document.createElement('div');\n  child2.className = 'pulse';\n  el.appendChild(child1);\n  el.appendChild(child2);\n\n  return new mapboxgl.Marker(el);\n}\n\nexport function startTracking(map) {\n  const marker = createMarker();\n  if (navigator.geolocation) {\n    navigator.geolocation.watchPosition(position =>\n      onPosition(position, marker, map)\n    );\n  } else {\n    alert(\"Sorry, your browser doesn't support geolocation!\");\n  }\n\n  if (window.DeviceOrientationEvent) {\n    window.addEventListener('deviceorientation', _setHeading);\n  }\n}\n\nfunction stopTracking() {\n  navigator.geolocation.clearWatch(this.state.watchPositionId);\n  window.removeEventListener('deviceorientation', _setHeading);\n}\n\nfunction onPosition(position, marker, map) {\n  marker.setLngLat([position.coords.longitude, position.coords.latitude]);\n  marker.addTo(map);\n}\n\nfunction _setHeading(e) {}\n","export function getElementByClassName(className) {\n  const elements = document.getElementsByClassName(className);\n  return elements[0];\n}\n\nexport function uniq(a) {\n  var prims = { boolean: {}, number: {}, string: {} },\n    objs = [];\n\n  return a.filter(function(item) {\n    var type = typeof item;\n    if (type in prims)\n      return prims[type].hasOwnProperty(item)\n        ? false\n        : (prims[type][item] = true);\n    else return objs.indexOf(item) >= 0 ? false : objs.push(item);\n  });\n}\n","import 'whatwg-fetch';\n\nimport { getElementByClassName, uniq } from './lib';\nimport { startTracking } from './geolocation';\nimport { registerEvents } from './events';\n\nmapboxgl.accessToken = '';\nconst map = new mapboxgl.Map({\n  container: 'map', // container id\n  style: 'https://openmaptiles.github.io/positron-gl-style/style-cdn.json', //stylesheet location\n  center: [4.355975, 50.860633], // starting position\n  zoom: 11 // starting zoom\n});\n\nfunction showAllRoutes() {\n  let geojson;\n  fetch('https://cyclerouting-api.osm.be/routes/GFR.json')\n    .then(response => response.json())\n    .then(json => {\n      addAllRoutes(json);\n    })\n    .catch(ex => console.log(ex));\n}\n\nfunction addAllRoutes(geojson) {\n  addFilters(geojson.features);\n\n  map.addSource('GFR', {\n    type: 'geojson',\n    data: geojson\n  });\n  map.addLayer({\n    id: 'GFR_routes',\n    type: 'line',\n    source: 'GFR',\n    layout: {\n      visibility: 'visible'\n    },\n    paint: {\n      'line-color': {\n        type: 'identity',\n        property: 'colour'\n      },\n      'line-width': 5,\n      'line-opacity': 0.3\n    }\n  });\n  map.addLayer({\n    id: 'GFR_symbols',\n    type: 'symbol',\n    source: 'GFR',\n    layout: {\n      visibility: 'visible',\n      'symbol-placement': 'line',\n      'text-font': ['Open Sans Regular'],\n      'text-field': '{icr}',\n      'text-size': 16\n    },\n    paint: {\n      'text-color': {\n        type: 'identity',\n        property: 'colour'\n      }\n    }\n  });\n}\n\nfunction toggleLayer(id) {\n  let visibility = map.getLayoutProperty(id, 'visibility');\n  if (visibility === 'visible') {\n    visibility = 'none';\n  } else {\n    visibility = 'visible';\n  }\n  map.setLayoutProperty(id, 'visibility', visibility);\n}\n\nfunction addMarker(LatLng) {\n  const geojson = {\n    type: 'FeatureCollection',\n    features: [\n      {\n        type: 'Feature',\n        geometry: {\n          type: 'Point',\n          coordinates: LatLng\n        },\n        properties: {\n          iconSize: [50, 50]\n        }\n      }\n    ]\n  };\n  const marker = geojson.features[0];\n  let el = document.createElement('img');\n  el.className = 'marker';\n  el.src = './icons/locator-yellow.svg';\n  el.style.width = marker.properties.iconSize[0] + 'px';\n  el.style.height = marker.properties.iconSize[1] + 'px';\n  return new mapboxgl.Marker(el, {\n    offset: [\n      -marker.properties.iconSize[0] / 2,\n      -marker.properties.iconSize[1] / 2\n    ]\n  }).setLngLat(marker.geometry.coordinates);\n}\n\nfunction calculateRoute(origin, destination, profile) {\n  // swap around values for the API\n  origin = [origin[1], origin[0]];\n  destination = [destination[1], destination[0]];\n  const url = `https://cyclerouting-api.osm.be/route?loc1=${origin}&loc2=${destination}&profile=${profile}`;\n  map.addLayer({\n    id: profile,\n    type: 'line',\n    source: {\n      type: 'geojson',\n      data: url\n    },\n    paint: {\n      'line-color': profile === 'networks' ? 'red' : 'grey',\n      'line-width': 4\n    }\n  });\n}\n\nfunction clearRoutes() {\n  map.removeLayer('networks');\n  map.getSource('networks');\n  map.removeLayer('shortest');\n}\n\nfunction createGeocoder(placeholder) {\n  return new MapboxGeocoder({\n    accessToken:\n      'pk.eyJ1IjoiYXJuYXVkd2V5dHMiLCJhIjoiY2o0cGt3d3oxMXl0cDMzcXNlbThnM3RtaCJ9.BMUyxqHH-FC69pW4U4YO9A',\n    flyTo: false,\n    placeholder,\n    country: 'BE'\n  });\n}\n\nfunction setPoint(result) {\n  return result.geometry.coordinates;\n}\n\nfunction filterRoute(route) {\n  map.setFilter('GFR_routes', ['==', 'icr', route]);\n  map.setFilter('GFR_symbols', ['==', 'icr', route]);\n}\n\nfunction removeFilter() {\n  map.setFilter('GFR_routes', null);\n  map.setFilter('GFR_symbols', null);\n}\n\nfunction configureStyle(el, color) {\n  const routeConfig = {\n    '1': 'radial',\n    '2': 'radial',\n    '3': 'radial',\n    '4': 'radial',\n    '5': 'radial',\n    '6': 'radial',\n    '7': 'radial',\n    '8': 'radial',\n    '9': 'radial',\n    '10': 'radial',\n    '11': 'radial',\n    '12': 'radial',\n    MM: 'transverse',\n    SZ: 'transverse',\n    CK: 'transverse',\n    PP: 'transverse',\n    A: 'loop',\n    B: 'loop',\n    C: 'loop'\n  };\n  el.className += '-' + routeConfig[el.innerHTML];\n  el.style.backgroundColor = color;\n  return el;\n}\n\nfunction addFilters(features) {\n  let menu = getElementByClassName('routelist');\n  let routes = [{}];\n  features.forEach(feat => {\n    routes.push({\n      name: feat.properties.icr,\n      color: feat.properties.colour\n    });\n  });\n  let all = document.createElement('li');\n  all.className = 'routelist-item routelist-item--active';\n  all.innerHTML = 'All';\n  all.addEventListener('click', () => {\n    const active = document.querySelector('.routelist-item--active');\n    active.classList.remove('routelist-item--active');\n    all.className += ' routelist-item--active';\n    removeFilter();\n  });\n  menu.appendChild(all);\n  uniq(routes).forEach(route => {\n    console.log(route);\n    let el = document.createElement('li');\n    el.className = 'routelist-item';\n    el.innerHTML = route.name;\n    el = configureStyle(el, route.color);\n    el.addEventListener('click', () => {\n      const active = document.querySelector('.routelist-item--active');\n      active.classList.remove('routelist-item--active');\n      el.className += ' routelist-item--active';\n      filterRoute(route.name);\n    });\n    menu.appendChild(el);\n  });\n}\n\nmap.on('load', function() {\n  let origin = null;\n  let destination = null;\n  let markerO = null;\n  let markerD = null;\n  let routes = null;\n\n  startTracking(map);\n\n  registerEvents(map);\n\n  routes = showAllRoutes();\n\n  // create geocoders and add to map\n  const geocoder = createGeocoder('origin');\n  const geocoder2 = createGeocoder('destination');\n  map.addControl(geocoder);\n  map.addControl(geocoder2);\n\n  // fire functions on result\n  geocoder.on('result', ({ result }) => {\n    // result event fires twice for some reason, this prevents it\n    // from executing our code twice, resulting in errors\n    if (!origin || destination !== setPoint(result)) {\n      markerO && markerO.remove();\n      origin = setPoint(result);\n      markerO = addMarker(origin);\n      markerO.addTo(map);\n    }\n  });\n  geocoder2.on('result', ({ result }) => {\n    if (!destination || destination !== setPoint(result)) {\n      destination && clearRoutes();\n      markerD && markerD.remove();\n      destination = setPoint(result);\n      markerD = addMarker(destination);\n      markerD.addTo(map);\n      calculateRoute(origin, destination, 'shortest');\n      calculateRoute(origin, destination, 'networks');\n      toggleLayer('GFR_routes');\n      toggleLayer('GFR_symbols');\n    }\n  });\n});\n"]}